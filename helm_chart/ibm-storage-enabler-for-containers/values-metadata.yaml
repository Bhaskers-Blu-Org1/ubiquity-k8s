## Metadata for IBM Storage Enabler for Containers configuration
## This metadata is used to augment the value.yaml to drive IBM Cloud Private UI for configuration of the Helm chart installation


ubiquity:
  __metadata:
    label: "ubiquity label"
    description: "Ubiquity description"
  image:
    repository:
      __metadata:
        name: "repository"
        label: "repository label"
        description: "Repository description"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        name: "tag"
        label: "tag label"
        description: "Tag description"
        type: "string"
        immutable: false
        required: true
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"
  resources:

  backend:
    __metadata:
      label: "backend label"
      description: "Operation backend of Provisioner and Flex volume."
      options:
      - label: "spectrumConnect"
        value: "spectrumConnect"
      - label: "spectrumScale"
        value: "spectrumScale"

  spectrumConnect:
    connectionInfo:
      fqdn:
        __metadata:
          name: "fqdn"
          label: "spectrumScale fqdn label"
          description: "IP or FQDN of Spectrum Connect server."
          type: "string"
      port:
        __metadata:
          name: "port"
          label: "port label"
          description: "Port of Spectrum Connect server."
          type: "number"
      username:
        __metadata:
          name: "username"
          label: "username label"
          description: "Username defined for IBM Storage Enabler for Containers interface in Spectrum Connect."
          type: "string"
      password:
        __metadata:
          name: "password"
          label: "password label"
          description: "Password defined for IBM Storage Enabler for Containers interface in Spectrum Connect."
          type: "string"

      existingSecret:
        __metadata:
          name: "existingSecret"
          label: "existingSecret label"
          description: "Set this param with an existing Spectrum Connect secret object if one exist."
          type: "string"

    backendConfig:
      instanceName:
        __metadata:
          name: "instanceName"
          label: "instance name"
          description: "A prefix for any new volume created on the storage system."
          type: "string"
      defaultStorageService:
        __metadata:
          name: "defaultStorageService"
          label: "default storageService"
          description: "Default Spectrum Connect storage service to be used, if not specified by the storage class."
          type: "string"
      newVolumeDefaults:
        fsType:
          __metadata:
            name: "fsType"
            label: "fs type"
            description: "The fstype of a new volume if not specified by the user in the storage class."
            options:
            - label: "ext4"
              value: "ext4"
            - label: "xfs"
              value: "xfs"
        size:
          __metadata:
            name: "size"
            label: "size label"
            description: "The default volume size (in GiB) if not specified by the user when creating a new volume."
            type: "number"

  spectrumScale:
    connectionInfo:
      fqdn:
        __metadata:
          name: "fqdn"
          label: "spectrumScale fqdn label"
          description: "IP or FQDN of Spectrum Scale RESTful API server."
          type: "string"
      port:
        __metadata:
          name: "port"
          label: "port label"
          description: "Port of Spectrum Scale RESTful API server."
          type: "number"
      username:
        __metadata:
          name: "username"
          label: "username label"
          description: "Username defined for IBM Storage Enabler for Containers interface in Spectrum Scale."
          type: "string"
      password:
        __metadata:
          name: "password"
          label: "password label"
          description: "Password defined for IBM Storage Enabler for Containers interface in Spectrum Scale."
          type: "string"

      existingSecret:
        __metadata:
          name: "existingSecret"
          label: "existing secret"
          description: "Set this param with an existing Spectrum Scale secret object if one exist."
          type: "string"

    backendConfig:
      # Default Spectrum Scale filesystem to be used.
      defaultFilesystemName:
        __metadata:
          name: "defaultFilesystemName"
          label: "default filesystem name"
          description: "Default Spectrum Scale filesystem to be used."
          type: "string"


ubiquityDb:
  __metadata:
    label: "ubiquity db"
    description: "Ubiquity db description"
  image:
    repository:
      __metadata:
        name: "repository"
        label: "repository label"
        description: "Repository description"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        name: "tag"
        label: "tag label"
        description: "Tag description"
        type: "string"
        immutable: false
        required: true
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"
  resources:
  nodeSelector:
  dbCredentials:
    username:
      __metadata:
        name: "username"
        label: "username label"
        description: "Username for the deployment of ubiquity-db database."
        type: "string"
    password:
      __metadata:
        name: "password"
        label: "password label"
        description: "Password for the deployment of ubiquity-db database."
        type: "string"
    existingSecret:
      __metadata:
        name: "existingSecret"
        label: "existing secret"
        description: "Set this param with an existing secret object if one exist."
        type: "string"

  persistence:
    pvName:
      __metadata:
        name: "pvName"
        label: "pv name"
        description: "Ubiquity database PV name. For Spectrum Virtualize, Spectrum Accelerate and Spectrum Scale, use default value 'ibm-ubiquity-db'. For DS8000 Family, use 'ibmdb' instead and make sure instanceName value length does not exceed 8 chars if you use spectrumConnect as backend."
        type: "string"
        required: true
    pvSize:
      __metadata:
        name: "pvSize"
        label: "pv size"
        description: "pv Size description"
        type: "string"
        required: true

    useExistingPv:
      __metadata:
        name: "useExistingPv"
        label: "useExisting pv"
        description: "Set this param to true if you want to use an existing PV as Ubiquity database PV. Use it only when you want to upgrade Ubiquity from old version installed by script to the latest version."
        type: "boolean"

    storageClass:
      storageClassName:
        __metadata:
          name: "storageClassName"
          label: "storageClass name"
          description: "storageClass Name description"
          type: "string"

      existingStorageClass:
        __metadata:
          name: "existingStorageClass"
          label: "existing storageClass"
          description: "Set this param with an existing storageclass object if one exist."
          type: "string"

      defaultClass:
        __metadata:
          name: "defaultClass"
          label: "defaultClass label"
          description: "Set StorageClass as the default StorageClass."
          type: "boolean"

      spectrumConnect:
        spectrumConnectServiceName:
          __metadata:
            name: "spectrumConnectServiceName"
            label: "spectrumConnect serviceName"
            description: "Storage Class profile parameter must point to the Spectrum Connect storage service name."
            type: "string"
        fsType:
          __metadata:
            label: "fs type"
            description: "Storage Class filesystem type."
            options:
            - label: "ext4"
              value: "ext4"
            - label: "xfs"
              value: "xfs"


ubiquityK8sFlex:
  __metadata:
    label: "ubiquityK8s flex"
    description: "ubiquityK8s Flex description"
  image:
    repository:
      __metadata:
        name: "repository"
        label: "repository label"
        description: "Repository description"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        name: "tag"
        label: "tag label"
        description: "Tag description"
        type: "string"
        immutable: false
        required: true
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"
  resources:
  # By default, the toleration is set to run the Flex DeamonSet on all worker and master nodes. To define a different toleration, uncomment and apply the relevant toleration value.
  tolerations:
  flexLogDir:
    __metadata:
      name: "flexLogDir"
      label: "flex LogDir"
      description: "Flex log directory. If the default value is changed, make sure that the new path exists on all the nodes and update the Flex DaemonSet hostpath accordingly."
      type: "string"


ubiquityK8sProvisioner:
  __metadata:
    label: "ubiquityK8s provisioner"
    description: "ubiquityK8s Provisioner"
  image:
    repository:
      __metadata:
        name: "repository"
        label: "repository label"
        description: "Repository description"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        name: "tag"
        label: "tag label"
        description: "Tag description"
        type: "string"
        immutable: false
        required: true
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"
  resources:


ubiquityHelmUtils:
  __metadata:
    label: "ubiquity helmUtils"
    description: "ubiquity HelmUtils description"
  image:
    repository:
      __metadata:
        name: "repository"
        label: "repository label"
        description: "Repository description"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        name: "tag"
        label: "tag label"
        description: "Tag description"
        type: "string"
        immutable: false
        required: true
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"


globalConfig:
  __metadata:
    label: "global config"
    description: "global Config description"
  logLevel:
    __metadata:
      label: "log level"
      description: "log Level description"
      options:
      - label: "debug"
        value: "debug"
      - label: "info"
        value: "info"
      - label: "error"
        value: "error"

  sslMode:
    __metadata:
      label: "ssl mode"
      description: "SSL verification mode. SSL mode is set for all communication paths between [flex||provisioner]<->ubiquity<->[SpectrumConnect||SpectrumScale]."
      options:
      - label: "require (no validation is required)"
        value: "require"
      - label: "verify-full (user-provided certificates)"
        value: "verify-full"

  defaultPodSecurityPolicy:
    enabled:
      __metadata:
        name: "enabled"
        label: "enabled label"
        description: "Enable the default pod security policy if it is set to true. Default is false."
        type: "boolean"
    clusterRole:
      __metadata:
        name: "clusterRole"
        label: "clusterRole label"
        description: "The name of clusterRole that has the required policies attached. Default value for ICP 3.1.1+ is ibm-anyuid-hostpath-clusterrole"
        type: "string"
